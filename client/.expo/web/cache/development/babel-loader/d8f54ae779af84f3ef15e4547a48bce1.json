{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\cnamu\\\\OneDrive\\\\Documents\\\\Desktop\\\\SPRING 2021\\\\CS465P\\\\Final_Project\\\\YourWishlist\\\\client\\\\src\\\\components\\\\LoadAssets.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport { AppLoading } from \"expo\";\nimport { Asset } from \"expo-asset\";\nimport * as Font from \"expo-font\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { StatusBar } from \"expo-status-bar\";\nimport Constants from \"expo-constants\";\nvar NAVIGATION_STATE_KEY = \"NAVIGATION_STATE_KEY-\" + Constants.manifest.sdkVersion;\n\nvar usePromiseAll = function usePromiseAll(promises, cb) {\n  return useEffect(function () {\n    (function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Promise.all(promises));\n\n            case 2:\n              cb();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  });\n};\n\nvar useLoadAssets = function useLoadAssets(assets, fonts) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      ready = _useState2[0],\n      setReady = _useState2[1];\n\n  usePromiseAll([Font.loadAsync(fonts)].concat(_toConsumableArray(assets.map(function (asset) {\n    return Asset.loadAsync(asset);\n  }))), function () {\n    return setReady(true);\n  });\n  return ready;\n};\n\nvar LoadAssets = function LoadAssets(_ref) {\n  var assets = _ref.assets,\n      fonts = _ref.fonts,\n      children = _ref.children;\n\n  var _useState3 = useState(!__DEV__),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isNavigationReady = _useState4[0],\n      setIsNavigationReady = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      initialState = _useState6[0],\n      setInitialState = _useState6[1];\n\n  var ready = useLoadAssets(assets || [], fonts || {});\n  useEffect(function () {\n    var restoreState = function restoreState() {\n      var savedStateString, state;\n      return _regeneratorRuntime.async(function restoreState$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(NAVIGATION_STATE_KEY));\n\n            case 3:\n              savedStateString = _context2.sent;\n              state = savedStateString ? JSON.parse(savedStateString) : undefined;\n              setInitialState(state);\n\n            case 6:\n              _context2.prev = 6;\n              setIsNavigationReady(true);\n              return _context2.finish(6);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0,, 6, 9]], Promise);\n    };\n\n    if (!isNavigationReady) {\n      restoreState();\n    }\n  }, [isNavigationReady]);\n  var onStateChange = useCallback(function (state) {\n    return AsyncStorage.setItem(NAVIGATION_STATE_KEY, JSON.stringify(state));\n  }, []);\n\n  if (!ready || !isNavigationReady) {\n    return React.createElement(AppLoading, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return React.createElement(NavigationContainer, {\n    onStateChange: onStateChange,\n    initialState: initialState,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    style: \"light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), children);\n};\n\nexport default LoadAssets;","map":{"version":3,"sources":["C:/Users/cnamu/OneDrive/Documents/Desktop/SPRING 2021/CS465P/Final_Project/YourWishlist/client/src/components/LoadAssets.tsx"],"names":["React","useCallback","useEffect","useState","AsyncStorage","AppLoading","Asset","Font","NavigationContainer","StatusBar","Constants","NAVIGATION_STATE_KEY","manifest","sdkVersion","usePromiseAll","promises","cb","Promise","all","useLoadAssets","assets","fonts","ready","setReady","loadAsync","map","asset","LoadAssets","children","__DEV__","isNavigationReady","setIsNavigationReady","initialState","setInitialState","restoreState","getItem","savedStateString","state","JSON","parse","undefined","onStateChange","setItem","stringify"],"mappings":"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","sourcesContent":["import React, { ReactElement, useCallback, useEffect, useState } from \"react\";\r\nimport { AsyncStorage } from \"react-native\";\r\nimport { AppLoading } from \"expo\";\r\nimport { Asset } from \"expo-asset\";\r\nimport * as Font from \"expo-font\";\r\nimport { InitialState, NavigationContainer } from \"@react-navigation/native\";\r\nimport { StatusBar } from \"expo-status-bar\";\r\nimport Constants from \"expo-constants\";\r\n\r\nconst NAVIGATION_STATE_KEY = `NAVIGATION_STATE_KEY-${Constants.manifest.sdkVersion}`;\r\n\r\nexport type FontSource = Parameters<typeof Font.loadAsync>[0];\r\nconst usePromiseAll = (\r\n  promises: Promise<void | void[] | Asset[]>[],\r\n  cb: () => void\r\n) =>\r\n  useEffect(() => {\r\n    (async () => {\r\n      await Promise.all(promises);\r\n      cb();\r\n    })();\r\n  });\r\n\r\nconst useLoadAssets = (assets: number[], fonts: FontSource): boolean => {\r\n  const [ready, setReady] = useState(false);\r\n  usePromiseAll(\r\n    [Font.loadAsync(fonts), ...assets.map((asset) => Asset.loadAsync(asset))],\r\n    () => setReady(true)\r\n  );\r\n  return ready;\r\n};\r\n\r\ninterface LoadAssetsProps {\r\n  fonts?: FontSource;\r\n  assets?: number[];\r\n  children: ReactElement | ReactElement[];\r\n}\r\n\r\nconst LoadAssets = ({ assets, fonts, children }: LoadAssetsProps) => {\r\n  const [isNavigationReady, setIsNavigationReady] = useState(!__DEV__);\r\n  const [initialState, setInitialState] = useState<InitialState | undefined>();\r\n  const ready = useLoadAssets(assets || [], fonts || {});\r\n  useEffect(() => {\r\n    const restoreState = async () => {\r\n      try {\r\n        const savedStateString = await AsyncStorage.getItem(\r\n          NAVIGATION_STATE_KEY\r\n        );\r\n        const state = savedStateString\r\n          ? JSON.parse(savedStateString)\r\n          : undefined;\r\n        setInitialState(state);\r\n      } finally {\r\n        setIsNavigationReady(true);\r\n      }\r\n    };\r\n\r\n    if (!isNavigationReady) {\r\n      restoreState();\r\n    }\r\n  }, [isNavigationReady]);\r\n  const onStateChange = useCallback(\r\n    (state) =>\r\n      AsyncStorage.setItem(NAVIGATION_STATE_KEY, JSON.stringify(state)),\r\n    []\r\n  );\r\n  if (!ready || !isNavigationReady) {\r\n    return <AppLoading />;\r\n  }\r\n  return (\r\n    <NavigationContainer {...{ onStateChange, initialState }}>\r\n      <StatusBar style=\"light\" />\r\n      {children}\r\n    </NavigationContainer>\r\n  );\r\n};\r\n\r\nexport default LoadAssets;\r\n"]},"metadata":{},"sourceType":"module"}